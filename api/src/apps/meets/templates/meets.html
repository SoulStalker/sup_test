{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–¢–∞–±–ª–∏—Ü–∞ Meet</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="{% static 'css/add-style.css' %}" rel="stylesheet">
    <link href="{% static 'css/output.css' %}" rel="stylesheet">

</head>
<body class="bg-gray-100 h-screen flex">

    <!-- Sidebar -->
    <div id="sidebar" class="w-16 bg-gray-800 text-white flex flex-col items-center p-4 h-screen transition-all duration-300">
        <button id="sidebar-toggle" class="mb-8 focus:outline-none">
            <span class="text-xl">&#9776;</span>
        </button>
        <div class="space-y-6">
            <a href="#" class="block text-center">
                <span class="block text-2xl">üè†</span>
                <span class="hidden sidebar-text">–ì–ª–∞–≤–Ω–∞—è</span>
            </a>
            <a href="#" class="block text-center">
                <span class="block text-2xl">üìä</span>
                <span class="hidden sidebar-text">–û—Ç—á–µ—Ç—ã</span>
            </a>
            <a href="#" class="block text-center">
                <span class="block text-2xl">‚öôÔ∏è</span>
                <span class="hidden sidebar-text">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
            </a>
            <a href="#" class="block text-center">
                <span class="block text-2xl">üßë‚Äçüíº</span>
                <span class="hidden sidebar-text">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</span>
            </a>
        </div>
    </div>

{% block content %}
    <div class="flex-grow p-6">
        <h1 class="text-2xl font-semibold mb-6">–¢–∞–±–ª–∏—Ü–∞ Meet</h1>
        <div class="bg-white shadow rounded-lg p-6">
            <!-- –ü–æ–∏—Å–∫ –∏ —ç–ª–µ–º–µ–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
            <div class="p-4 flex items-center">
                <!-- –ü–æ–∏—Å–∫ -->
                <input type="text" placeholder="–ü–æ–∏—Å–∫" class="p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-teal-500 w-1/3 mr-4">
                <div class="flex items-center space-x-2">
                    <div class="bg-[#327680B2] p-4 flex justify-center space-x-4">
                        <button id="style1-button" class="bg-gray-200 p-2 rounded-lg text-[#FCFEFF] flex items-center justify-center hover:bg-gray-300 focus:outline-none active-button">
                            <svg width="28" height="16" viewBox="0 0 28 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M3.16602 6.10352e-05H1.49935C1.03911 6.10352e-05 0.666016 0.358233 0.666016 0.800061V2.40006C0.666016 2.84189 1.03911 3.20006 1.49935 3.20006H3.16602C3.62625 3.20006 3.99935 2.84189 3.99935 2.40006V0.800061C3.99935 0.358233 3.62625 6.10352e-05 3.16602 6.10352e-05Z" fill="#40454D"/>
                                <path d="M3.16602 6.40006H1.49935C1.03911 6.40006 0.666016 6.75823 0.666016 7.20006V8.80006C0.666016 9.24189 1.03911 9.60006 1.49935 9.60006H3.16602C3.62625 9.60006 3.99935 9.24189 3.99935 8.80006V7.20006C3.99935 6.75823 3.62625 6.40006 3.16602 6.40006Z" fill="#40454D"/>
                                <path d="M3.16602 12.8001H1.49935C1.03911 12.8001 0.666016 13.1582 0.666016 13.6001V15.2001C0.666016 15.6419 1.03911 16.0001 1.49935 16.0001H3.16602C3.62625 16.0001 3.99935 15.6419 3.99935 15.2001V13.6001C3.99935 13.1582 3.62625 12.8001 3.16602 12.8001Z" fill="#40454D"/>
                                <path d="M25.666 3.20006H8.99935C8.55732 3.20006 8.1334 3.03149 7.82084 2.73143C7.50828 2.43137 7.33268 2.02441 7.33268 1.60006C7.33268 1.17571 7.50828 0.768749 7.82084 0.46869C8.1334 0.168632 8.55732 6.10352e-05 8.99935 6.10352e-05H25.666C26.108 6.10352e-05 26.532 0.168632 26.8445 0.46869C27.1571 0.768749 27.3327 1.17571 27.3327 1.60006C27.3327 2.02441 27.1571 2.43137 26.8445 2.73143C26.532 3.03149 26.108 3.20006 25.666 3.20006Z" fill="#40454D"/>
                                <path d="M25.666 9.60006H8.99935C8.55732 9.60006 8.1334 9.43149 7.82084 9.13143C7.50828 8.83137 7.33268 8.42441 7.33268 8.00006C7.33268 7.57571 7.50828 7.16875 7.82084 6.86869C8.1334 6.56863 8.55732 6.40006 8.99935 6.40006H25.666C26.108 6.40006 26.532 6.56863 26.8445 6.86869C27.1571 7.16875 27.3327 7.57571 27.3327 8.00006C27.3327 8.42441 27.1571 8.83137 26.8445 9.13143C26.532 9.43149 26.108 9.60006 25.666 9.60006Z" fill="#40454D"/>
                                <path d="M25.666 16.0001H8.99935C8.55732 16.0001 8.1334 15.8315 7.82084 15.5314C7.50828 15.2314 7.33268 14.8244 7.33268 14.4001C7.33268 13.9757 7.50828 13.5687 7.82084 13.2687C8.1334 12.9686 8.55732 12.8001 8.99935 12.8001H25.666C26.108 12.8001 26.532 12.9686 26.8445 13.2687C27.1571 13.5687 27.3327 13.9757 27.3327 14.4001C27.3327 14.8244 27.1571 15.2314 26.8445 15.5314C26.532 15.8315 26.108 16.0001 25.666 16.0001Z" fill="#40454D"/>
                            </svg>
                        </button>
                        <button id="style2-button" class="bg-gray-200 p-2 rounded-lg inactive-button flex items-center justify-center hover:bg-gray-300 focus:outline-none">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M23.999 4.79994C23.999 4.16342 23.7462 3.55297 23.2961 3.10288C22.846 2.6528 22.2355 2.39994 21.599 2.39994H19.199V1.19994C19.199 0.881679 19.0726 0.576454 18.8476 0.351411C18.6225 0.126367 18.3173 -6.10352e-05 17.999 -6.10352e-05C17.6808 -6.10352e-05 17.3755 0.126367 17.1505 0.351411C16.9255 0.576454 16.799 0.881679 16.799 1.19994V2.39994H13.199V1.19994C13.199 0.881679 13.0726 0.576454 12.8476 0.351411C12.6225 0.126367 12.3173 -6.10352e-05 11.999 -6.10352e-05C11.6808 -6.10352e-05 11.3755 0.126367 11.1505 0.351411C10.9255 0.576454 10.799 0.881679 10.799 1.19994V2.39994H7.19902V1.19994C7.19902 0.881679 7.0726 0.576454 6.84755 0.351411C6.62251 0.126367 6.31728 -6.10352e-05 5.99902 -6.10352e-05C5.68076 -6.10352e-05 5.37554 0.126367 5.1505 0.351411C4.92545 0.576454 4.79902 0.881679 4.79902 1.19994V2.39994H2.39902C1.7625 2.39994 1.15205 2.6528 0.701967 3.10288C0.25188 3.55297 -0.000976562 4.16342 -0.000976562 4.79994V7.19994H23.999V4.79994Z" fill="#FCFEFF"/>
                                <path d="M-0.000976562 21.5999C-0.000976562 22.2365 0.25188 22.8469 0.701967 23.297C1.15205 23.7471 1.7625 23.9999 2.39902 23.9999H21.599C22.2355 23.9999 22.846 23.7471 23.2961 23.297C23.7462 22.8469 23.999 22.2365 23.999 21.5999V9.59994H-0.000976562V21.5999ZM5.99902 11.9999H17.999C18.3173 11.9999 18.6225 12.1264 18.8476 12.3514C19.0726 12.5765 19.199 12.8817 19.199 13.1999C19.199 13.5182 19.0726 13.8234 18.8476 14.0485C18.6225 14.2735 18.3173 14.3999 17.999 14.3999H5.99902C5.68076 14.3999 5.37554 14.2735 5.1505 14.0485C4.92545 13.8234 4.79902 13.5182 4.79902 13.1999C4.79902 12.8817 4.92545 12.5765 5.1505 12.3514C5.37554 12.1264 5.68076 11.9999 5.99902 11.9999Z" fill="#FCFEFF"/>
                            </svg>
                        </button>
                    </div>
                    <select id="category-select" class="border border-gray-300 rounded-lg px-4 py-2 focus:ring-teal-500 focus:border-teal-500">
                        <option value="–ö–∞—Ç–µ–≥–æ—Ä–∏—è">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</option>
                        {% for category in categories %}
                        <option value="{{ category.pk }}">{{ category.name }}</option>
                        {% endfor %}
                    </select>
                </div>
                <!-- –≠–ª–µ–º–µ–Ω—Ç—ã –ø–æ—Å–ª–µ –∫–Ω–æ–ø–∫–∏ "–ú–µ–Ω—é —Ç–∞–±–ª–∏—Ü—ã" —Å–º–µ—â–µ–Ω—ã –≤–ø—Ä–∞–≤–æ -->
                <div class="flex items-center ml-auto space-x-4">
                    <!-- –í—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ –¥–ª—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ç—Ä–æ–∫ -->
                    <select id="rows-per-page" class="p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-teal-500 bg-green-custom text-white">
                        <option value="8">8</option>
                        <option value="16">16</option>
                        <option value="24">24</option>
                    </select>

                    <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è -->
                    <div class="flex items-center space-x-2 pagination">
                        <span class="text-green-custom">–ü–∞–≥–∏–Ω–∞—Ü–∏—è</span>
                        <button id="prev-page" class="bg-green-custom text-white border border-gray-300 p-2 rounded-l hover:bg-green-dark">‚ùÆ</button>
                        <span id="page-info"></span>
                        <button id="next-page" class="bg-green-custom text-white border border-gray-300 p-2 rounded-r hover:bg-green-dark">‚ùØ</button>
                    </div>


                    <button id="open-modal" class="bg-green-custom text-white px-4 py-2 rounded hover:bg-green-dark">–°–æ–∑–¥–∞—Ç—å Meet</button>
                </div>
            </div>
            <div id="table-container">
                <!-- –¢–∞–±–ª–∏—Ü–∞ 1 -->
                 <table id="table-style-1" class="w-full table-fixed mx-auto text-center">
                    <thead class="bg-gray-100 text-xs">
                        <tr>
                            <th class="border-b py-2 w-[50px] whitespace-nowrap">ID</th>
                            <th class="border-b py-2">–ò–º—è</th>
                            <th class="border-b py-2">–§–∞–º–∏–ª–∏—è</th>
                            <th class="border-b py-2">–ù–∏–∫ Telegram</th>
                            <th class="border-b py-2">–ò–º—è Telegram</th>
                            {% for meet in meets %}
                                <th data-category="{{ meet.category.pk }}" class="border-b py-2 font-semibold leading-3.5">
                                    {{ meet.start_time|date:"d.m." }}<br>{{ meet.start_time|date:"Y" }}
                                </th>
                            {% endfor %}
                        </tr>
                    </thead>
                    <tbody>
                        {% for user in users %}
                            <tr>
                                <td class="border-b py-2 px-4 w-[50px] text-center whitespace-nowrap">{{ user.id }}</td>
                                <td class="border-b py-2 px-4">{{ user.first_name }}</td>
                                <td class="border-b py-2 px-4">{{ user.last_name }}</td>
                                <td class="border-b py-2 px-4">{{ user.email }}</td>
                                <td class="border-b py-2 px-4">{{ user }}</td>
                                {% for meet in meets %}
                                    {% if user in meet.participants.all %}
                                        <td data-category="{{ meet.category.pk }}" class="border-b py-2 px-4 text-center">
                                            {% for user_meet in user.custom_meets.all %}
                                                {% if user_meet.meet.id == meet.id %}
                                                    {% if user_meet.status_color == 'red' %}
                                                        <div class="w-6 h-6 mx-auto rounded-lg bg-red-400 border border-red-800"></div>
                                                    {% elif user_meet.status_color == 'yellow' %}
                                                        <div class="w-6 h-6 mx-auto rounded-lg bg-yellow-200 border border-yellow-600"></div>
                                                    {% else %}
                                                        <div class="w-6 h-6 mx-auto rounded-lg bg-green-400 border border-gray-600"></div>
                                                    {% endif %}
                                                {% endif %}
                                            {% endfor %}
                                        </td>
                                    {% else %}
                                        <td data-category="{{ meet.category.pk }}" class="border-b py-2 px-4 text-center">
                                            <div class="w-6 h-6 mx-auto rounded-lg bg-gray-200 border border-gray-600"></div>
                                        </td>
                                    {% endif %}
                                {% endfor %}
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>

                <!-- –¢–∞–±–ª–∏—Ü–∞ 2 -->
                <table id="table-style-2" class="w-full table-fixed mx-auto hidden">
                    <thead class="bg-gray-100 text-xs">
                    <tr>
                        <th class="border-b py-2 px-4 text-left">ID</th>
                        <th class="border-b py-2 px-4 text-left">–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                        <th class="border-b py-2 px-4 text-left">–î–∞—Ç–∞</th>
                        <th class="border-b py-2 px-4 text-left"></th>
                        <th class="border-b py-2 px-4 text-left"></th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for meet in meets %}
                    <tr data-category="{{ meet.category.id }}">
                        <td class="border-b py-2 px-4 max-w-[50px]">{{ meet.id }}</td>
                        <td class="border-b py-2 px-4">{{ meet.title }}</td>
                        <td class="border-b py-2 px-4">{{ meet.start_time|date:"d.m.y" }}</td>
                        <td class="max-w-[50px] border-b py-2 px-4">
                            <button class="text-teal-600 hover:underline delete-btn" data-meet-id="{{ meet.id }}">
                                <svg width="18" height="21" viewBox="0 0 18 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M17 5.12727H13V3.02201C13 2.46366 12.7893 1.92818 12.4142 1.53337C12.0391 1.13855 11.5304 0.916748 11 0.916748H7C6.46957 0.916748 5.96086 1.13855 5.58579 1.53337C5.21071 1.92818 5 2.46366 5 3.02201V5.12727H1C0.734784 5.12727 0.48043 5.23818 0.292893 5.43558C0.105357 5.63299 0 5.90073 0 6.17991C0 6.45908 0.105357 6.72682 0.292893 6.92423C0.48043 7.12164 0.734784 7.23254 1 7.23254H2V18.8115C2 19.3698 2.21071 19.9053 2.58579 20.3001C2.96086 20.6949 3.46957 20.9167 4 20.9167H14C14.5304 20.9167 15.0391 20.6949 15.4142 20.3001C15.7893 19.9053 16 19.3698 16 18.8115V7.23254H17C17.2652 7.23254 17.5196 7.12164 17.7071 6.92423C17.8946 6.72682 18 6.45908 18 6.17991C18 5.90073 17.8946 5.63299 17.7071 5.43558C17.5196 5.23818 17.2652 5.12727 17 5.12727ZM7 3.02201H11V5.12727H7V3.02201ZM8 16.7062C8 16.9854 7.89464 17.2531 7.70711 17.4505C7.51957 17.648 7.26522 17.7589 7 17.7589C6.73478 17.7589 6.48043 17.648 6.29289 17.4505C6.10536 17.2531 6 16.9854 6 16.7062V9.3378C6 9.05863 6.10536 8.79088 6.29289 8.59348C6.48043 8.39607 6.73478 8.28517 7 8.28517C7.26522 8.28517 7.51957 8.39607 7.70711 8.59348C7.89464 8.79088 8 9.05863 8 9.3378V16.7062ZM12 16.7062C12 16.9854 11.8946 17.2531 11.7071 17.4505C11.5196 17.648 11.2652 17.7589 11 17.7589C10.7348 17.7589 10.4804 17.648 10.2929 17.4505C10.1054 17.2531 10 16.9854 10 16.7062V9.3378C10 9.05863 10.1054 8.79088 10.2929 8.59348C10.4804 8.39607 10.7348 8.28517 11 8.28517C11.2652 8.28517 11.5196 8.39607 11.7071 8.59348C11.8946 8.79088 12 9.05863 12 9.3378V16.7062Z" fill="#0C0C0C"/>
                                </svg>
                            </button>
                        </td>
                        <td class="max-w-[50px] border-b py-2 px-4">
                            <button class="text-teal-600 hover:underline edit-meet-button" data-meet-id="{{ meet.id }}">
                                <svg width="18" height="19" viewBox="0 0 18 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M12.4525 7.73527L12.448 7.74157L6.02434 14.1658L7.94954 16.0903L14.3786 9.66156L12.4525 7.73527Z" fill="#0C0C0C"/>
                                    <path d="M2.82559 10.9668L4.75078 12.893L11.1753 6.46878L11.1816 6.46428L9.2546 4.53709L2.82559 10.9668Z" fill="#0C0C0C"/>
                                    <path d="M1.79594 12.4826L0.0462492 17.7313C-0.0617561 18.0544 0.0228479 18.4118 0.26406 18.6521C0.435068 18.824 0.66548 18.9167 0.900391 18.9167C0.995796 18.9167 1.0921 18.9014 1.18481 18.8699L6.43297 17.1201L1.79594 12.4826Z" fill="#0C0C0C"/>
                                    <path d="M16.9401 1.97531C15.5279 0.563895 13.2292 0.563895 11.817 1.97531L10.5282 3.2643L15.6521 8.38877L16.941 7.09978C18.3532 5.68746 18.3532 3.38762 16.9401 1.97531Z" fill="#0C0C0C"/>
                                </svg>
                            </button>
                        </td>

                    </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è C–æ–∑–¥–∞—Ç—å Meet -->
    <!-- –í–∫–ª—é—á–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —á–µ—Ä–µ–∑ include -->
    {% include 'create_meet_modal.html' %}
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è C–æ–∑–¥–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é -->
    <!-- –í–∫–ª—é—á–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —á–µ—Ä–µ–∑ include -->
    {% include 'category_modal.html' %}

    <!-- –ü–æ–ø–∞–ø –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è -->

    <div id="confirm-delete-popup" class="fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center hidden">
        <div class="bg-white p-8 rounded-lg shadow-lg w-1/3">
            <h2 class="text-lg mb-4">–î–∞–Ω–Ω—ã–π –º–∏—Ç –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω</h2>
            <div class="flex justify-end space-x-2">
                <button id="confirm-delete" type="button" class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700">–£–¥–∞–ª–∏—Ç—å</button>
                <button id="cancel-delete" type="button" class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-700">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <!--    <script src="{% static 'script/script.js' %}"></script>-->

    <script src="{% static 'script/meets.js' %}"></script>

{% endblock %}

</body>
</html>
